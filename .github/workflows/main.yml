name: Node Task System

on:
  workflow_dispatch:
  schedule:
    # ÙŠØ¨Ø¯Ø£ Ø§Ù„Ø¹Ù…Ù„ ÙŠÙˆÙ…ÙŠØ§Ù‹ Ø§Ù„Ø³Ø§Ø¹Ø© 7 ØµØ¨Ø§Ø­Ø§Ù‹ Ø¨ØªÙˆÙ‚ÙŠØª Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© (04:00 UTC)
    - cron: '0 4 * * *'

concurrency:
  group: system-session
  cancel-in-progress: true 

jobs:
  run-task:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Code
        uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'

      - name: Install Dependencies
        run: npm install wolf.js dotenv

      - name: Execute System
        env:
          U_MAIL: ${{ secrets.U_MAIL }}
          U_PASS: ${{ secrets.U_PASS }}
          ENTRY_P: ${{ secrets.ENTRY_P }}
          EXIT_P: ${{ secrets.EXIT_P }}
          MATCH_V: ${{ secrets.MATCH_V }}
          EXEC_V: ${{ secrets.EXEC_V }}
        run: |
          echo "ğŸš€ System Online: Monitoring Signals..."
          # ÙŠØ¹Ù…Ù„ Ù„Ù…Ø¯Ø© 20 Ø³Ø§Ø¹Ø© (1200 Ø¯Ù‚ÙŠÙ‚Ø©) Ø«Ù… ÙŠØªÙˆÙ‚Ù Ù„Ù„Ø±Ø§Ø­Ø©
          timeout 1200m node app.js || echo "âœ… Cycle Completed"
